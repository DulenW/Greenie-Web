#!/usr/bin/env sh

echo "üöÄ Running pre-push hook..."
echo "Building project to ensure it compiles correctly..."

# Save the current branch name
current_branch=$(git symbolic-ref --short HEAD)
echo "üì¶ Current branch: $current_branch"

# Run build and capture both output and exit code
output=$(npm run build 2>&1)
exit_code=$?

# Print the output
echo "$output"

if [ $exit_code -eq 0 ]; then
    echo "‚úÖ Build completed successfully"
else
    echo "‚ùå Build failed. Please fix the build errors before pushing"
    exit 1
fi
